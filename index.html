<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/style.css" />
    <title>Work Day Scheduler</title>
  </head>

  <body>
    <header class="jumbotron">
      <h1 class="display-3">Work Day Scheduler</h1>
      <p class="lead">A simple calendar app for scheduling your work day</p>
      <p id="currentDay" class="lead"></p>
    </header>
    <h2 id="currentDate" style="text-align: center;"></h2><br>
    <div class="container">
      <!-- Timeblocks go here -->
      <div class="input-group mb-3">
        <div class="input-group-append">
          <label id="8AM"></label>
        </div>
        <input id="input" type="text" class="form-control"  placeholder="New Event:" value=""  aria-describedby="button-addon2">
        <div class="input-group-append">
          <button onclick="saveEvent()" class="btn btn-outline-secondary" type="button" id="button-addon2">Save</button>
        </div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script type="text/javascript">

      //variables for today's date and time
      var today = new Date();
      var date = (today.getMonth()+1)+'-'+today.getDate()+'-'+today.getFullYear();
      var hours = today.getHours();
      var compareHr = parseInt(today.getHours());
      var minutes = today.getMinutes();
      var hoursMins = hours 
      console.log(hoursMins);
      // Check whether AM or PM 
      var newformat = hours >= 12 ? 'PM' : 'AM';    
      // Find current hour in AM-PM Format 
      hours = hours % 12;           
      // To display "0" as "12" 
      hours = hours ? hours : 12;  
      minutes = minutes < 10 ? '0' + minutes : minutes;
      var todayTime = date + " " + hours + ':' + minutes + ' ' + newformat;

      var inputEvent= document.getElementById("input");
      //var storedValue = localStorage.getItem("event");

      document.getElementById("currentDate").innerText += todayTime;
      document.getElementById("8AM").innerText += 8 + ":" + 0 + 0 + " AM";

      if (compareHr > 8 ){
        document.getElementById("input").className += " " + "past";
      } else if (compareHr < 8){
        document.getElementById("input").className += " " + "future";
      } else if (compareHr === 8){
        document.getElementById("input").className += " " + "present";
      }

      
      var inputEvent= document.getElementById("input");
      function showEvent(){
        document.getElementById("input").removeAttribute("placeholder");
        document.getElementById("input").setAttribute('value', localStorage.getItem("event"));

      }
      if (localStorage.getItem("event") === null){
        console.log("storage is empty")
      } else {
        showEvent();
      }
      

      function saveEvent(){
        localStorage.setItem("event", inputEvent.value);  
      }
  
    
    </script>
  </body>
</html>
